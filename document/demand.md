# 青山工业区多介质污染综合管理系统需求规格说明书

## 一、项目概述
### 1.1 项目目标
本项目旨在开发一个基于Vue+Spring Boot的前后端分离网站，实现青山区土壤、蔬菜、空气污染物数据的可视化展示、数据录入及管理功能，为环境监测提供基础工具。

### 1.2 范围说明
- **功能范围**：包含地图可视化、污染统计、数据添加、数据管理、用户登录等核心功能。
- **技术范围**：前端采用Vue框架集成高德地图API和D3.js，后端使用Spring Boot构建RESTful接口，数据库采用MySQL存储污染数据和用户信息。


## 二、功能需求

### 2.1 地图页（HomeMap.vue）
#### 2.1.1 页面结构
- **顶部导航栏**：  
  - 左侧入口：污染地图（当前页）、污染统计、数据添加、数据管理  
  - 右侧状态：未登录时显示“请登录”，登录后显示用户名  
- **主体区域**：  
  - 嵌入高德地图API，绘制青山区行政边界  
  - 左侧图层切换标签：土壤（默认）、蔬菜、空气  

#### 2.1.2 监测点展示
- **数据来源**：后端数据库提供40个土壤点位、4个空气点位，通过`pollutant_type`字段区分类型  
- **展示逻辑**：  
  - 选中“土壤”标签：显示`pollutant_type=土壤`的监测点  
  - 选中“蔬菜”标签：显示`pollutant_type=蔬菜`的监测点（若有）  
  - 选中“空气”标签：显示`pollutant_type=空气`的监测点  
- **图标区分**：土壤监测点用绿色标记，空气监测点用蓝色标记（蔬菜暂未明确，可默认与土壤同色）

#### 2.1.3 交互逻辑
- **点击监测点**：  
  - 弹出弹窗，包含两页信息：  
    - **第一页（污染值）**：  
      - 点位名称  
      - 经度、纬度  
      - 污染类别（土壤/蔬菜/空气）  
      - 污染物浓度：  
        - 土壤/蔬菜：Pb、Cu、Zn、Cd、Cr、As、AP、HN、AS、K（分两列展示）（AP-土壤有效磷；HN土壤碱解氮；AS-土壤有效硫）
        - 空气：PM2.5、PM10（两行展示）
    - **第二页（健康等级）**：展示综合健康等级（如“安全”“轻度污染”）  
  - 数据请求：前端将监测点`id`传给后端，调用接口`/api/stations/{id}`获取详情  

- **点击非监测点**：  
  - 弹出同结构弹窗（不显示点位名称）  
  - 数据请求：前端将点击位置的经纬度`(lng, lat)`传给后端，调用接口`/api/nearby?lng={lng}&lat={lat}`获取模拟数据  


### 2.2 统计图页面（PollutionPlot.vue）
#### 2.2.1 页面结构
- **左右选项卡**：  
  - 左侧（默认）：统计图  
  - 右侧：计算过程  
- **统计图区域**：两列卡片布局，每卡片包含图表+描述  
- **计算过程区域**：静态文字、公式、图片（直接写入前端代码）

#### 2.2.2 数据说明
- 图表数据暂存于前端JS代码中（示例数据如下）：  
  ```javascript
  // 空气质量数据示例
  const airData = [
    { month: 'Jan', pm25: 50, pm10: 80 },
    { month: 'Feb', pm25: 45, pm10: 75 }
  ];

- 图表类型：
  - 空气污染物浓度：柱状图
  - 空气质量指数趋势：折线图
  - 土壤污染物分布：饼图

### 2.3 新数据添加页（DataAdding.vue）

#### 2.3.1 前置逻辑
未登录时打开页面，弹出提示窗：“请登录后再添加数据”，点击确认关闭

#### 2.3.2 页面布局
- 左侧表单区域：
  1. 基础信息：
        - 监测点位名称（必填）
        - 经度、纬度（可手动输入或通过地图自动填充）
        - 采样时间（日期选择器）
    2. 污染类型选择：土壤 / 蔬菜 / 空气
    3. 动态表单：
        - 选择 “土壤 / 蔬菜”：展示 Pb、Cu、Zn 等 10 项污染物输入框
        - 选择 “空气”：展示 PM2.5、PM10 输入框
    4. 提交按钮：
        - 校验点位名称非空
        - 调用后端接口/api/stations提交数据
        - 响应处理：
          - 重复点位：提示 “监测点位名重复，建议命名为地名 - 日期 - 编号形式”
          - 成功：提示 “数据提交成功，待审核确认”
- 右侧辅助地图：
    - 点击地图任意位置，自动填充经纬度至左侧表单
    - 手动输入经纬度时，地图自动定位并标记红点

### 2.4 数据管理页

#### 2.4.1 功能分区
- 待审核数据：
    - 展示未确认的新上传数据，包含：
      - 采样时间、点位名称、位置（经纬度）、污染类型、污染物浓度
    - 操作按钮：通过、拒绝（修改数据状态为 “已确认” 或 “已拒绝”）
- 已入库数据：
    - 展示已确认的数据，支持查看详情和删除操作

### 2.5 登录功能
#### 2.5.1 页面结构
- 登录表单：
    - 账号：手机号输入框
    - 密码：密码输入框
    - 记住密码：勾选框
    - 操作按钮：登录、注册新账号
- 注册分支：
    - 区分访客注册和管理员注册（本作业项目暂不区分角色，统一为普通用户）